[main]
testTopDir = BENCHMARK_PATH
webTopDir  = WEBROOT_PATH

useCmake = 1
isSuperbuild = 0

sourceTree = C_Src

# suiteName is the name prepended to all output directories
suiteName = MFIX-Exa-GPU

COMP = g++

purge_output = 1

MAKE = make
numMakeJobs = 4

# MPIcommand should use the placeholders:
#   @host@ to indicate where to put the hostname to run on
#   @nprocs@ to indicate where to put the number of processors
#   @command@ to indicate where to put the command to run
#
# only tests with useMPI = 1 will run in parallel
# nprocs is problem dependent and specified in the individual problem
# sections.

#MPIcommand = mpiexec -host @host@ -n @nprocs@ @command@
MPIcommand = mpiexec -n @nprocs@ @command@
MPIhost =

reportActiveTestsOnly = 1

# Add "GO UP" link at the top of the web page?
goUpLink = 1

# email
sendEmailWhenFail = 0
emailTo =
emailBody = Check CCSE tests completed

[AMReX]
dir = AMREX_PATH
branch = development
cmakeSetupOpts = -DCMAKE_CXX_COMPILER_LAUNCHER=ccache -DAMReX_PLOTFILE_TOOLS=ON -DAMReX_TESTING=ON  -DAMReX_ASSERTIONS=ON  -DAMReX_EB=ON  -DAMReX_PARTICLES=ON  -DAMReX_LINEAR_SOLVERS=ON  -DAMReX_MPI=ON  -DAMReX_OMP=OFF -DAMReX_GPU_BACKEND=CUDA -DAMReX_CUDA_ARCH="61"

[source]
dir = MFIXEXA_PATH
branch = develop
cmakeSetupOpts = -DCMAKE_CXX_COMPILER_LAUNCHER=ccache -DAMReX_TESTING=ON  -DAMReX_ASSERTIONS=ON  -DMFIX_MPI=ON  -DMFIX_OMP=OFF -DMFIX_GPU_BACKEND=CUDA -DAMReX_CUDA_ARCH="61"


# individual problems follow

[BENCH01-Size0001]
buildDir = benchmarks/01-HCS/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=25  mfix.fixed_dt=0 amr.plt_regtest=1 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5
tolerance = 1e-6


[BENCH01-Size0001-Godunov]
tolerance = 1.e-7
buildDir = benchmarks/01-HCS/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=25  mfix.fixed_dt=0 amr.plt_regtest=1 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9 mfix.dt_max=6.e-5


[BENCH01-Size0001-Godunov-advect-momentum]
tolerance = 1.e-7
buildDir = benchmarks/01-HCS/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=25  mfix.fixed_dt=0 amr.plt_regtest=1 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9 mfix.dt_max=6.e-5 mfix.advect_momentum=true


[BENCH01-Size0001-advect-momentum]
tolerance = 1.e-7
buildDir = benchmarks/01-HCS/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=25  mfix.fixed_dt=0 amr.plt_regtest=1 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.advect_momentum=true


[BENCH01-replicate]
tolerance = 6.5e-6
buildDir = benchmarks/01-HCS/Size0001
inputFile = inputs.repl
aux1File = particle_input.dat
link1File= replicate_chk00000
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.fixed_dt=0 amr.plt_regtest=0  mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5


[BENCH01-replicate-Godunov]
tolerance = 7.e-6
buildDir = benchmarks/01-HCS/Size0001
inputFile = inputs.repl
aux1File = particle_input.dat
link1File= replicate_chk00000
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.fixed_dt=0  amr.plt_regtest=1  mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9 mfix.dt_max=6.e-5


[BENCH01-restart]
tolerance = 1.e-10
buildDir = benchmarks/01-HCS/Size0008
inputFile = inputs.rt
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 1
restartFileNum = 5
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false  amr.plt_regtest=0 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5


[BENCH01-restart-Godunov]
tolerance = 1.e-12
buildDir = benchmarks/01-HCS/Size0008
inputFile = inputs.rt
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 1
restartFileNum = 5
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false  amr.plt_regtest=0 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9


[BENCH02-Size0001]
buildDir = benchmarks/02-settling/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.max_step=50 amr.plt_regtest=1 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5 mfix.dt_max=1.6e-5
tolerance = 2.e-7


[BENCH02-Size0001-Godunov]
tolerance = 5.e-6
buildDir = benchmarks/02-settling/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.max_step=50 amr.plt_regtest=1 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9 mfix.dt_max=2.7e-5


[BENCH02-Size0001-walls]
tolerance = 1.e-9
buildDir = benchmarks/02-settling/Size0001
inputFile = inputs.box
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.max_step=50 amr.plt_regtest=1 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5


[BENCH02-Size0001-walls-Godunov]
tolerance = 5.e-9
buildDir = benchmarks/02-settling/Size0001
inputFile = inputs.box
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.max_step=50 amr.plt_regtest=1 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9 mfix.dt_max=2.2e-5


[BENCH03-Size0001]
buildDir = benchmarks/03-fluidbed/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.max_step=30 amr.plt_regtest=1 amr.plot_int=30 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5
tolerance = 2.e-7


[BENCH03-Size0001-Godunov]
tolerance = 5.e-6
abs_tolerance = 3.e-08
buildDir = benchmarks/03-fluidbed/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.max_step=20 amr.plt_regtest=1 amr.plot_int=30 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9


[BENCH04-Size0001]
buildDir = benchmarks/04-square-riser/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=1000 amr.plt_regtest=1 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5
tolerance = 5.0e-6


[BENCH04-Size0001-Godunov]
tolerance = 5.e-6
abs_tolerance = 1.e-08
buildDir = benchmarks/04-square-riser/Size0001
inputFile = inputs
aux1File = particle_input.dat
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=2000 amr.plt_regtest=1 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9


[BENCH05-Size0008]
buildDir = benchmarks/05-cyl-fluidbed/Size0008
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 4
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=50 amr.plt_regtest=1 mfix.max_step=50 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5 amrex.the_arena_init_size=512000000
tolerance = 2.e-10


[BENCH05-Size0008-Godunov]
buildDir = benchmarks/05-cyl-fluidbed/Size0008
abs_tolerance = 1.e-08
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 4
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=50 amr.plt_regtest=1 mfix.max_step=50 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9 amrex.the_arena_init_size=512000000 mfix.dt_max=9.6e-5
tolerance = 1.e-9


[BENCH05-Size0008_medium]
buildDir = benchmarks/05-cyl-fluidbed/Size0008_medium
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=10 mfix.max_step=10 amr.plt_regtest=1 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5
tolerance = 4.e-10


[BENCH05-Size0008_medium-Godunov]
buildDir = benchmarks/05-cyl-fluidbed/Size0008_medium
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=10 mfix.max_step=10 amr.plt_regtest=1 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9
tolerance = 5.e-5
abs_tolerance = 1.e-08


[BENCH05-Size0008_wide]
buildDir = benchmarks/05-cyl-fluidbed/Size0008_wide
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 4
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=30 amr.plt_regtest=1 mfix.max_step=30 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5 amrex.the_arena_init_size=512000000
tolerance = 2.e-10


[BENCH05-Size0008_wide-Chemistry]
tolerance = 7.5e-8
buildDir = benchmarks/05-cyl-fluidbed/Size0008_wide
inputFile = inputs_chem.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 4
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=30 amr.plt_regtest=1 amrex.the_arena_init_size=512000000 mfix.max_step=10


[BENCH05-Size0008_wide-Godunov]
buildDir = benchmarks/05-cyl-fluidbed/Size0008_wide
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 4
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=30 amr.plt_regtest=1 mfix.max_step=30 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9 amrex.the_arena_init_size=512000000
tolerance = 1.e-4
abs_tolerance = 5.e-08


[BENCH06-Size0008]
tolerance = 1e-10
abs_tolerance = 1.e-08
buildDir = benchmarks/06-cyl-riser/Size0008
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 4
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=50 amr.plt_regtest=1 mfix.max_step=50 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5 amrex.the_arena_init_size=512000000


[BENCH06-Size0008-Godunov]
tolerance = 1.0e-9
buildDir = benchmarks/06-cyl-riser/Size0008
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 4
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=50 amr.plt_regtest=1 mfix.max_step=50 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9 amrex.the_arena_init_size=512000000


[BENCH08-PIC-Patil]
tolerance = 2.e-4
buildDir = benchmarks/08-pic/patil
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=20 amr.plt_regtest=1 mfix.max_step=20 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist"


[BENCH08-PIC-Patil-Godunov]
tolerance = 5.e-7
buildDir = benchmarks/08-pic/patil
inputFile = inputs.rt
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=20 amr.plt_regtest=1 mfix.max_step=20 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist"


[BENCH08-PIC-Patil-restart]
tolerance = 5.e-7
buildDir = benchmarks/08-pic/patil
inputFile = inputs.rt
link1File= chk00005
target = mfix
dim = 3
restartTest = 0
restartFileNum = 5
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false  mfix.restart="chk00005" amr.plt_regtest=0


[BENCH09-refinement]
tolerance = 1.e-08
abs_tolerance = 1.e-08
buildDir = benchmarks/09-refinement/
inputFile = inputs
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false mfix.max_step=1


[DEM01-x_single]
buildDir = tests/DEM01-x
inputFile = inputs
aux1File = particle_input.dat
target = mfix_DEM01-x
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 1
particleTypes = particles
runtime_params = amr.plot_int=5000 amr.plt_regtest=0
particle_tolerance = 1.e-12


[DEM03-z_single]
buildDir = tests/DEM03-z
inputFile = inputs
aux1File = particle_input.dat
target = mfix_DEM03-z
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 1
particleTypes = particles
runtime_params = amr.plot_int=10 amr.plt_regtest=0
particle_tolerance = 1.e-12


[DEM04-x_single]
tolerance = 1.e-10
buildDir = tests/DEM04-x
inputFile = inputs
aux1File = particle_input.dat
target = mfix_DEM04-x
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 1
particleTypes = particles
runtime_params = amr.plt_regtest=0 amr.plot_int=200
particle_tolerance = 1.e-8


[TracerAdv]
tolerance = 1.e-10
buildDir = tutorials/tracer
inputFile = inputs
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=10 mfix.max_step=10 mfix.advection_type="MOL" mfix.redistribution_type="FluxRedist" mfix.cfl=0.5


[TracerAdv-Godunov]
tolerance = 1.e-11
buildDir = tutorials/tracer
inputFile = inputs
target = mfix
dim = 3
restartTest = 0
useMPI = 1
numprocs = 1
useOMP = 0
numthreads = 1
compileTest = 0
doVis = 0
selfTest = 0
compareParticles = 0
particleTypes = particles
runtime_params = nodal_proj.use_gauss_seidel=false amr.plot_int=10 mfix.max_step=10 mfix.advection_type="Godunov" mfix.redistribution_type="StateRedist" mfix.cfl=0.9
